<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
        // Store the full path including the base directory (e.g., /BlockyList/create-playlist)
        const path = window.location.pathname;
        // Store the query string and hash (e.g., ?code=... or #section)
        const search = window.location.search;
        const hash = window.location.hash;

        // Extract the segment corresponding to the repository name (the base path)
        // Assumes the repository name is the first segment after the domain
        // e.g., for /BlockyList/callback, it extracts /BlockyList
        const basePath = '/' + path.split('/')[1];

        // Reconstruct the intended URL within the SPA
        // Redirect to the root index.html, but keep the original path, search, and hash
        // The router (with basename configured) will then handle the path correctly.
        // We use sessionStorage to pass the path to index.html
        sessionStorage.redirect = path + search + hash;

        // Redirect to the root of the repository
        window.location.replace(basePath + '/');

    </script>
</head>

<body>
    <p>If you are not redirected automatically, <a id="link" href="#">click here</a>.</p>
    <script>
        // Provide a fallback link in case the script doesn't run immediately
        document.getElementById('link').href = sessionStorage.redirect || '/';
    </script>
</body>

</html>